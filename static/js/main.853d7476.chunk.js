(this["webpackJsonpjackbox-lobbies"]=this["webpackJsonpjackbox-lobbies"]||[]).push([[0],{53:function(e,t,n){e.exports=n(89)},58:function(e,t,n){},59:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(12),u=n.n(c),o=(n(58),n(121)),i=(n(59),n(26)),s=n(17),f=n(4),l=n.n(f),p=n(8),m=n(11),d=n(122),v=n(123),h=n(117),b=n(116),w=n(124),x=n(114),g=Object(x.a)((function(e){return{formControl:{margin:e.spacing(3)}}}));function j(e){var t=e.names,n=e.selectedNames,r=e.onCheckboxChange,c=g();return a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{component:"fieldset",className:c.formControl},a.a.createElement(w.a,{component:"legend"},"Games"),a.a.createElement(b.a,{row:!0},t.map((function(e){return a.a.createElement(h.a,{key:e,label:e,control:a.a.createElement(d.a,{checked:n.has(e),onChange:function(e){return r&&r(e.currentTarget)},name:e})})})))))}var k=n(126),O=n(125),E=n(118),y=n(120),A=n(119),C=n(90),S=n(47),P=0;function R(){var e=new Map,t=new Set,n=function(){var e=void 0,t=void 0,n=0;return{add:function(r){var a={value:r};e||(e=a),t||(t=a),t.next=a,t=a,n+=1},pop:function(){if(!e)return e;var r=e;return(e=e.next)||(t=void 0),n-=1,r.value},clear:function(){e=void 0,t=void 0,n=0},peek:function(){var t;return null===(t=e)||void 0===t?void 0:t.value},get length(){return n}}}();return{init:function(){var e=arguments;return Object(p.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,t.abrupt("return",Promise.all(Array(n).fill().map(r)));case 2:case"end":return t.stop()}}),t)})))()},getIdleWorker:function(){return Object(p.a)(l.a.mark((function e(){var r,a,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(i.a)(t),e.prev=1,r.s();case 3:if((a=r.n()).done){e.next=8;break}return u=a.value,e.abrupt("return",c(u));case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r.e(e.t0);case 13:return e.prev=13,r.f(),e.finish(13);case 16:return e.abrupt("return",new Promise((function(e){return n.add((function(t){e(t)}))})));case 17:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})))()},killWorkerId:function(n){var a=arguments;return Object(p.a)(l.a.mark((function c(){var u,o;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(u=a.length>1&&void 0!==a[1]&&a[1],e.has(n)){c.next=3;break}return c.abrupt("return");case 3:return o=e.get(n),e.delete(o.id),t.delete(o.id),c.next=8,o.terminate();case 8:if(!u){c.next=10;break}return c.abrupt("return");case 10:return c.next=12,r();case 12:case"end":return c.stop()}}),c)})))()},freeWorkerId:function(r){e.has(r)&&(t.add(r),n.length&&n.pop()(c(r)))},terminate:function(){return Object(p.a)(l.a.mark((function r(){var a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.clear(),n.clear(),a=Object(s.a)(e.values()),e.clear(),r.next=6,Promise.all(a.map((function(e){return e.terminate()})));case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})))()}};function r(){return a.apply(this,arguments)}function a(){return(a=Object(p.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Object(S.createWorker)({}),n.next=3,r.load();case 3:return n.next=5,r.loadLanguage("eng");case 5:return n.next=7,r.initialize("eng");case 7:return n.next=9,r.setParameters({tessjs_create_hocr:"0",tessjs_create_tsv:"0"});case 9:return e.set(r.id,r),t.add(r.id),n.abrupt("return",r);case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function c(n){var r=e.get(n);return t.delete(n),r}}var T=a.a.createContext();function _(e){var t=e.children,n=e.numWorkers,c=void 0===n?20:n,u=Object(r.useState)(),o=Object(m.a)(u,2),i=o[0],s=o[1];return Object(r.useEffect)((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workersPoolSize,n=void 0===t?20:t,r=new Map,a=R();return{init:function(){return Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.init(n);case 2:case"end":return e.stop()}}),e)})))()},addRecognitionJob:function(e,t,n){function c(){return(c=Object(p.a)(l.a.mark((function c(){var u;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,a.getIdleWorker();case 2:return u=c.sent,r.set(n,u.id),c.prev=4,c.next=7,u.recognize(e,t,n);case 7:return c.abrupt("return",c.sent);case 8:return c.prev=8,r.delete(n),a.freeWorkerId(u.id),c.finish(8);case 12:case"end":return c.stop()}}),c,null,[[4,,8,12]])})))).apply(this,arguments)}function u(){return(u=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.has(n)){e.next=2;break}return e.abrupt("return");case 2:t=r.get(n),r.delete(n),a.freeWorkerId(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n=n||"job-".concat(P++),[function(){return c.apply(this,arguments)}(),function(){return u.apply(this,arguments)}]},terminate:function(){return Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.clear(),e.next=3,a.terminate();case 3:case"end":return e.stop()}}),e)})))()}}}({workersPoolSize:c});e.init(),s(e)}),[c]),a.a.createElement(T.Provider,{value:i},i&&t)}T.displayName="ImageTextRecognitionContext";var W=Object(x.a)((function(e){return{root:{margin:e.spacing(1)},media:{width:480,height:270}}}));function K(e){var t=e.stream,n=e.gameName,c=W(),u=function(e){var t=Object(r.useState)({}),n=Object(m.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){if(e){var t=!1;return Object(p.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L(e);case 2:if(r=n.sent,!t){n.next=5;break}return n.abrupt("return");case 5:c(r);case 6:case"end":return n.stop()}}),n)})))(),function(){return t=!0}}}),[e]),a}(t.thumbnail_url),o=u.blob,i=u.imgSrc,s=function(e,t){var n=Object(r.useContext)(T),a=Object(r.useState)(),c=Object(m.a)(a,2),u=c[0],o=c[1];return Object(r.useEffect)((function(){if(n&&e){var r=!1,a=n.addRecognitionJob(e,t),c=Object(m.a)(a,2),u=c[0],i=c[1];return Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u;case 2:if(t=e.sent,n=t.data,!r){e.next=6;break}return e.abrupt("return");case 6:o(n);case 7:case"end":return e.stop()}}),e)})))(),function(){r=!0,i()}}}),[e,t,n]),u}(o),f=!s,d=null===s||void 0===s?void 0:s.lines.some((function(e){return e.text.match(/everybody|to start|same players|room|on your/i)}));if(!f&&!d)return a.a.createElement(a.a.Fragment,null);var v="https://twitch.tv/".concat(t.user_name.toLowerCase());return a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{className:c.root,style:{opacity:d?1:.3,order:d?0:1}},a.a.createElement(E.a,{href:v,target:"_blank",rel:"noopener noreferrer"},a.a.createElement(A.a,{className:c.media,image:i||"https://via.placeholder.com/480x270?text=%E2%80%A6",title:"Click to watch ".concat(t.user_name," on Twitch")}),f&&a.a.createElement(k.a,null),a.a.createElement(y.a,{style:{display:"flex",flexDirection:"row"}},a.a.createElement(C.a,{variant:"body1",color:"textSecondary",component:"span"},n||t.user_name),a.a.createElement("span",{style:{flex:1}}),a.a.createElement(C.a,{variant:"body1",color:"textSecondary",component:"span"},"watching now: ",t.viewer_count)))))}function L(e){return N.apply(this,arguments)}function N(){return(N=Object(p.a)(l.a.mark((function e(t){var n,r,a,c,u,o,i,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:1920,r=s.length>2&&void 0!==s[2]?s[2]:1080,a=s.length>3&&void 0!==s[3]?s[3]:0,c=t.replace("{width}",n).replace("{height}",r),e.next=6,fetch(c,{cache:"reload"});case 6:if(u=e.sent,!(J(u.headers)>20&&a<8)){e.next=10;break}return e.abrupt("return",L(t,n+1,r,a+1));case 10:return e.next=12,u.blob();case 12:return o=e.sent,i=window.URL.createObjectURL(o),e.abrupt("return",{blob:o,imgSrc:i});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){var t=1e3*function(e){var t=e.get("cache-control");if(!t)return 300;var n=new URLSearchParams(t).get("max-age");return n?+n:300}(e),n=new Date(e.get("expires")||Date.now()).getTime()-t;return(Date.now()-n)/1e3}var U=function(e){var t="",n=function(){return{"Client-ID":e,Authorization:"Bearer ".concat(t)}};return{getStreams:function(e,t){var r=this;return Object(p.a)(l.a.mark((function a(){var c,u,o,i,s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=new URLSearchParams,e.forEach((function(e){return c.append("game_id",e)})),c.append("first","100"),t&&c.append("after",t),a.next=6,fetch("https://api.twitch.tv/helix/streams?"+c,{headers:n()});case 6:return u=a.sent,a.next=9,u.json();case 9:return o=a.sent,i=o.data,s=o.pagination,a.abrupt("return",{streams:i,fetchNext:function(){var t=Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.getStreams(e,s.cursor));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 13:case"end":return a.stop()}}),a)})))()},getGames:function(e){return Object(p.a)(l.a.mark((function t(){var r,a,c,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URLSearchParams,e.forEach((function(e){return r.append("name",e)})),t.next=4,fetch("https://api.twitch.tv/helix/games?"+r,{headers:n()});case 4:return a=t.sent,t.next=7,a.json();case 7:return c=t.sent,u=c.data,t.abrupt("return",u||[]);case 10:case"end":return t.stop()}}),t)})))()},getAuthUrl:function(){var t=new URLSearchParams;return t.append("client_id",e),t.append("redirect_uri",window.location.origin+window.location.pathname),t.append("response_type","token"),t.append("scope",""),"https://id.twitch.tv/oauth2/authorize?"+t},handleAuthResponse:function(){var e=new URLSearchParams(window.location.hash.slice(1)).get("access_token");e&&(t=e)},hasAuth:function(){return!!t}}},z=a.a.createContext({twitchApi:U("r2000vj19f088smr120ej452wxlkrt")});function B(){var e=Object(r.useContext)(z).twitchApi;return e.handleAuthResponse(),e}var I=["DRAWFUL 2","THE JACKBOX PARTY PACK","THE JACKBOX PARTY PACK 2","THE JACKBOX PARTY PACK 3","THE JACKBOX PARTY PACK 4","THE JACKBOX PARTY PACK 5","THE JACKBOX PARTY PACK 6"];function M(){var e=B(),t=Object(r.useState)(new Set([])),n=Object(m.a)(t,2),c=n[0],u=n[1],i=Object(r.useState)([]),f=Object(m.a)(i,2),d=f[0],v=f[1],h=Object(r.useState)(new Map),b=Object(m.a)(h,2),w=b[0],x=b[1],g=Object(r.useState)([]),k=Object(m.a)(g,2),O=k[0],E=k[1],y=Object(r.useState)((function(){return function(){}})),A=Object(m.a)(y,2),C=A[0],S=A[1];return Object(r.useEffect)((function(){if(!c.size)return v([]),void x(new Map);var t=!1;return Object(p.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getGames(c);case 2:if(r=n.sent,!t){n.next=5;break}return n.abrupt("return");case 5:v(r),x(new Map(r.map((function(e){return[e.id,e.name]}))));case 7:case"end":return n.stop()}}),n)})))(),function(){return t=!0}}),[e,c]),Object(r.useEffect)((function(){if(!d.length)return E([]),void S((function(){return function(){}}));var t=!1;function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];E(t?function(t){return H([].concat(Object(s.a)(t),Object(s.a)(e.streams)))}:e.streams),S((function(){return Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n,t.next=3,e.fetchNext();case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1,!0));case 5:case"end":return t.stop()}}),t)})))}))}return Object(p.a)(l.a.mark((function r(){var a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getStreams(d.map((function(e){return e.id})));case 2:if(a=r.sent,!t){r.next=5;break}return r.abrupt("return");case 5:n(a);case 6:case"end":return r.stop()}}),r)})))(),function(){return t=!0}}),[e,d]),a.a.createElement(a.a.Fragment,null,a.a.createElement(_,null,a.a.createElement(j,{names:I,selectedNames:c,onCheckboxChange:function(e){var t=e.name,n=e.checked;u((function(e){var r=new Set(e);return n?r.add(t):r.delete(t),r}))}}),a.a.createElement("div",null,"Checking ",O.length," streams\u2026"),a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},O.map((function(e){return a.a.createElement(K,{key:e.id,stream:e,gameName:w.get(e.game_id)})}))),a.a.createElement(o.a,{variant:"contained",size:"large",color:"primary",onClick:C,style:{position:"fixed",bottom:0}},"SHOW ME MOAR")))}function H(e){var t,n=new Map,r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.set(a.id,a)}}catch(c){r.e(c)}finally{r.f()}return Object(s.a)(n.values())}var D=function(){var e=B();return a.a.createElement("div",{className:"App"},e.hasAuth()?a.a.createElement(M,null):a.a.createElement(o.a,{color:"primary",variant:"contained",size:"large",href:e.getAuthUrl()},"Login"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.853d7476.chunk.js.map