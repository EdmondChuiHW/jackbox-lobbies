(this["webpackJsonpjackbox-lobbies"]=this["webpackJsonpjackbox-lobbies"]||[]).push([[0],{53:function(e,t,n){e.exports=n(89)},58:function(e,t,n){},59:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(13),o=n.n(c),u=(n(58),n(121)),s=(n(59),n(43)),i=n(29),l=n(5),f=n.n(l),m=n(9),p=n(11),h=n(122),d=n(123),b=n(117),v=n(116),w=n(124),g=n(114),x=Object(g.a)((function(e){return{formControl:{margin:e.spacing(3)}}}));function j(e){var t=e.names,n=e.selectedNames,r=e.onCheckboxChange,c=x();return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{component:"fieldset",className:c.formControl},a.a.createElement(w.a,{component:"legend"},"Games"),a.a.createElement(v.a,{row:!0},t.map((function(e){return a.a.createElement(b.a,{key:e,label:e,control:a.a.createElement(h.a,{checked:n.has(e),onChange:function(e){return r&&r(e.currentTarget)},name:e})})})))))}var O=n(126),E=n(125),k=n(118),A=n(120),y=n(119),C=n(90),S=n(12),P=a.a.createContext();function R(e){var t=e.children,n=Object(r.useState)(),c=Object(p.a)(n,2),o=c[0],u=c[1];return Object(r.useEffect)((function(){var e=Object(S.createScheduler)();Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Object(S.createWorker)(),Object(S.createWorker)(),Object(S.createWorker)(),Object(S.createWorker)(),Object(S.createWorker)(),Object(S.createWorker)()].map(function(){var t=Object(m.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.load();case 2:return t.next=4,n.loadLanguage("eng");case 4:return t.next=6,n.initialize("eng");case 6:return t.next=8,n.setParameters({tessjs_create_hocr:"0",tessjs_create_tsv:"0"});case 8:e.addWorker(n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return u(e),t.abrupt("return",(function(){return e.terminate()}));case 4:case"end":return t.stop()}}),t)})))()}),[]),a.a.createElement(P.Provider,{value:o},t)}P.displayName="ImageTextRecognitionContext";var T=Object(g.a)((function(e){return{root:{margin:e.spacing(1)},media:{width:480,height:270}}}));function _(e){var t=e.stream,n=e.gameName,c=T(),o=function(e){var t=Object(r.useState)({}),n=Object(p.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){if(e){var t=!1;return Object(m.a)(f.a.mark((function n(){var r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,W(e);case 2:if(r=n.sent,!t){n.next=5;break}return n.abrupt("return");case 5:c(r);case 6:case"end":return n.stop()}}),n)})))(),function(){return t=!0}}}),[e]),a}(t.thumbnail_url),u=o.blob,s=o.imgSrc,i=function(e,t){var n=Object(r.useContext)(P),a=Object(r.useState)(),c=Object(p.a)(a,2),o=c[0],u=c[1];return Object(r.useEffect)((function(){if(n&&e){var r=!1;return Object(m.a)(f.a.mark((function a(){var c,o;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.addJob("recognize",e,t);case 2:if(c=a.sent,o=c.data,!r){a.next=6;break}return a.abrupt("return");case 6:u(o),console.log(o);case 8:case"end":return a.stop()}}),a)})))(),function(){console.log("canceled"),r=!0}}}),[e,t,n]),o}(u),l=!i,h=null===i||void 0===i?void 0:i.lines.some((function(e){return e.text.match(/everybody|to start|same players|room|on your/i)}));if(!l&&!h)return a.a.createElement(a.a.Fragment,null);var d="https://twitch.tv/".concat(t.user_name.toLowerCase());return a.a.createElement(a.a.Fragment,null,a.a.createElement(E.a,{className:c.root,style:{opacity:h?1:.3,order:h?0:1}},a.a.createElement(k.a,{href:d,target:"_blank",rel:"noopener noreferrer"},a.a.createElement(y.a,{className:c.media,image:s||"https://via.placeholder.com/480x270?text=%E2%80%A6",title:"Click to watch ".concat(t.user_name," on Twitch")}),l&&a.a.createElement(O.a,null),a.a.createElement(A.a,{style:{display:"flex",flexDirection:"row"}},a.a.createElement(C.a,{variant:"body1",color:"textSecondary",component:"span"},n||t.user_name),a.a.createElement("span",{style:{flex:1}}),a.a.createElement(C.a,{variant:"body1",color:"textSecondary",component:"span"},"watching now: ",t.viewer_count)))))}function W(e){return K.apply(this,arguments)}function K(){return(K=Object(m.a)(f.a.mark((function e(t){var n,r,a,c,o,u,s,i,l=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:1920,r=l.length>2&&void 0!==l[2]?l[2]:1080,a=l.length>3&&void 0!==l[3]?l[3]:0,c=t.replace("{width}",n).replace("{height}",r),e.next=6,fetch(c,{cache:"reload"});case 6:if(o=e.sent,u=L(o.headers)>20,console.log(a),!(u&&a<8)){e.next=11;break}return e.abrupt("return",W(t,n+1,r,a+1));case 11:return e.next=13,o.blob();case 13:return s=e.sent,i=window.URL.createObjectURL(s),e.abrupt("return",{blob:s,imgSrc:i});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){var t=1e3*function(e){var t=e.get("cache-control");if(!t)return 300;var n=new URLSearchParams(t).get("max-age");return n?+n:300}(e),n=new Date(e.get("expires")||Date.now()).getTime()-t;return(Date.now()-n)/1e3}var N=function(e){var t="",n=function(){return{"Client-ID":e,Authorization:"Bearer ".concat(t)}};return{getStreams:function(e,t){var r=this;return Object(m.a)(f.a.mark((function a(){var c,o,u,s,i;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=new URLSearchParams,e.forEach((function(e){return c.append("game_id",e)})),c.append("first","100"),t&&c.append("after",t),a.next=6,fetch("https://api.twitch.tv/helix/streams?"+c,{headers:n()});case 6:return o=a.sent,a.next=9,o.json();case 9:return u=a.sent,s=u.data,i=u.pagination,a.abrupt("return",{streams:s,fetchNext:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.getStreams(e,i.cursor));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 13:case"end":return a.stop()}}),a)})))()},getGames:function(e){return Object(m.a)(f.a.mark((function t(){var r,a,c,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URLSearchParams,e.forEach((function(e){return r.append("name",e)})),t.next=4,fetch("https://api.twitch.tv/helix/games?"+r,{headers:n()});case 4:return a=t.sent,t.next=7,a.json();case 7:return c=t.sent,o=c.data,t.abrupt("return",o||[]);case 10:case"end":return t.stop()}}),t)})))()},getAuthUrl:function(){var t=new URLSearchParams;return t.append("client_id",e),t.append("redirect_uri",window.location.origin+window.location.pathname),t.append("response_type","token"),t.append("scope",""),"https://id.twitch.tv/oauth2/authorize?"+t},handleAuthResponse:function(){var e=new URLSearchParams(window.location.hash.slice(1)).get("access_token");e&&(t=e)},hasAuth:function(){return!!t}}},U=a.a.createContext({twitchApi:N("r2000vj19f088smr120ej452wxlkrt")});function B(){var e=Object(r.useContext)(U).twitchApi;return e.handleAuthResponse(),e}var J=["DRAWFUL 2","THE JACKBOX PARTY PACK","THE JACKBOX PARTY PACK 2","THE JACKBOX PARTY PACK 3","THE JACKBOX PARTY PACK 4","THE JACKBOX PARTY PACK 5","THE JACKBOX PARTY PACK 6"];function D(){var e=B(),t=Object(r.useState)(new Set(["DRAWFUL 2"])),n=Object(p.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)([]),l=Object(p.a)(s,2),h=l[0],d=l[1],b=Object(r.useState)(new Map),v=Object(p.a)(b,2),w=v[0],g=v[1],x=Object(r.useState)([]),O=Object(p.a)(x,2),E=O[0],k=O[1],A=Object(r.useState)((function(){return function(){}})),y=Object(p.a)(A,2),C=y[0],S=y[1];return Object(r.useEffect)((function(){var t=!1;return Object(m.a)(f.a.mark((function n(){var r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getGames(c);case 2:if(r=n.sent,!t){n.next=5;break}return n.abrupt("return");case 5:d(r),g(new Map(r.map((function(e){return[e.id,e.name]}))));case 7:case"end":return n.stop()}}),n)})))(),function(){return t=!0}}),[e,c]),Object(r.useEffect)((function(){var t=!1;function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];k(t?function(t){return H([].concat(Object(i.a)(t),Object(i.a)(e.streams)))}:e.streams),S((function(){return Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n,t.next=3,e.fetchNext();case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1,!0));case 5:case"end":return t.stop()}}),t)})))}))}return Object(m.a)(f.a.mark((function r(){var a;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getStreams(h.map((function(e){return e.id})));case 2:if(a=r.sent,!t){r.next=5;break}return r.abrupt("return");case 5:console.log(a.streams),n(a);case 7:case"end":return r.stop()}}),r)})))(),function(){return t=!0}}),[e,h,c]),a.a.createElement(a.a.Fragment,null,a.a.createElement(j,{names:J,selectedNames:c,onCheckboxChange:function(e){var t=e.name,n=e.checked;o((function(e){var r=new Set(e);return n?r.add(t):r.delete(t),r}))}}),a.a.createElement(R,null,a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},E.map((function(e){return a.a.createElement(_,{key:e.id,stream:e,gameName:w.get(e.game_id)})})))),a.a.createElement(u.a,{variant:"contained",size:"large",color:"primary",onClick:C,style:{position:"fixed",bottom:0}},"SHOW ME MOAR"))}function H(e){var t,n=new Map,r=Object(s.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.set(a.id,a)}}catch(c){r.e(c)}finally{r.f()}return Object(i.a)(n.values())}var z=function(){var e=B();return a.a.createElement("div",{className:"App"},e.hasAuth()?a.a.createElement(D,null):a.a.createElement(u.a,{color:"primary",variant:"contained",size:"large",href:e.getAuthUrl()},"Login"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.2032beec.chunk.js.map